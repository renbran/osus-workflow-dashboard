<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Performance Analytics Dashboard</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/recharts@2.8.0/esm/index.js" type="module"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const { useState, useEffect } = React;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line } = Recharts;
        const { Trophy, TrendingUp, Target, DollarSign, Users, Calendar, Filter, Award, Phone, MessageSquare, CheckCircle, Star, Activity } = LucideReact;

        // Sample data to demonstrate the dashboard (replace with your actual data loading logic)
        const generateSampleData = () => {
            const agents = [
                'Sarah Johnson', 'Mike Chen', 'Emily Rodriguez', 'David Kim', 'Lisa Thompson',
                'James Wilson', 'Maria Garcia', 'Robert Brown', 'Jennifer Lee', 'Michael Davis',
                'Amanda Smith', 'Chris Martinez', 'Nicole White', 'Kevin Taylor', 'Rachel Green'
            ];
            
            const statuses = ['NEW', 'ATTEMPT', 'CONTACTED', 'OPTIONS SENT', 'HOT', 'CUSTOMER', 'UNSUCCESSFUL', 'Junk Lead', 'IDLE'];
            const sources = ['Website', 'Referral', 'Cold Call', 'Social Media', 'Email Campaign', 'Walk-in'];
            
            const generateQuarterData = (baseMultiplier) => {
                return agents.map(agent => {
                    const total = Math.floor(Math.random() * 100 + 50) * baseMultiplier;
                    const customers = Math.floor(total * (Math.random() * 0.3 + 0.05));
                    const hot = Math.floor(total * (Math.random() * 0.2 + 0.05));
                    const contacted = Math.floor(total * (Math.random() * 0.4 + 0.1));
                    const optionsSent = Math.floor(total * (Math.random() * 0.3 + 0.05));
                    const newLeads = Math.floor(total * (Math.random() * 0.2 + 0.05));
                    const attempts = Math.floor(total * (Math.random() * 0.15 + 0.05));
                    
                    const statusBreakdown = {
                        'NEW': newLeads,
                        'ATTEMPT': attempts,
                        'CONTACTED': contacted,
                        'OPTIONS SENT': optionsSent,
                        'HOT': hot,
                        'CUSTOMER': customers,
                        'UNSUCCESSFUL': Math.floor(total * 0.1),
                        'Junk Lead': Math.floor(total * 0.05),
                        'IDLE': Math.floor(total * 0.05)
                    };
                    
                    const sourceBreakdown = sources.reduce((acc, source) => {
                        acc[source] = Math.floor(Math.random() * 20 + 1);
                        return acc;
                    }, {});
                    
                    const safePercent = (num, den) => den > 0 ? Math.round((num / den * 100) * 100) / 100 : 0;
                    
                    return {
                        agent,
                        total,
                        customers,
                        hot,
                        contacted,
                        optionsSent,
                        newLeads,
                        attempts,
                        sourceDiversity: Object.keys(sourceBreakdown).length,
                        conversionRate: safePercent(customers, total),
                        engagementRate: safePercent(contacted + optionsSent, total),
                        hotLeadRate: safePercent(hot, total),
                        responseRate: safePercent(total - newLeads, total),
                        leadQualityScore: safePercent(hot + customers, total),
                        followUpEfficiency: safePercent(contacted, attempts + contacted),
                        closingEfficiency: safePercent(customers, hot + optionsSent),
                        statusBreakdown,
                        sourceBreakdown
                    };
                });
            };
            
            return {
                Q1: generateQuarterData(0.8),
                Q2: generateQuarterData(1.0),
                Q3: generateQuarterData(1.2),
                quarterCounts: {
                    Q1: Math.floor(Math.random() * 1000 + 2000),
                    Q2: Math.floor(Math.random() * 1000 + 2500),
                    Q3: Math.floor(Math.random() * 1000 + 3000)
                }
            };
        };

        const Dashboard = () => {
            const [activeQuarter, setActiveQuarter] = useState('Q1');
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [data, setData] = useState(null);
            const [loading, setLoading] = useState(true);

            const industryCategories = {
                "Lead Generation": { statuses: ["NEW", "ATTEMPT"], icon: Users, color: "#3B82F6" },
                "Engagement": { statuses: ["CONTACTED", "OPTIONS SENT"], icon: MessageSquare, color: "#10B981" },
                "Conversion": { statuses: ["HOT", "CUSTOMER"], icon: CheckCircle, color: "#F59E0B" },
                "Non-Viable": { statuses: ["UNSUCCESSFUL", "Junk Lead", "IDLE"], icon: Activity, color: "#EF4444" }
            };

            useEffect(() => {
                // Simulate loading time
                setTimeout(() => {
                    setData(generateSampleData());
                    setLoading(false);
                }, 1500);
            }, []);

            if (loading || !data) {
                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-red-900 to-red-800 flex items-center justify-center"
                }, React.createElement('div', {
                    className: "text-center"
                }, [
                    React.createElement('div', {
                        key: 'spinner',
                        className: "animate-spin rounded-full h-32 w-32 border-b-2 border-yellow-400 mx-auto mb-4"
                    }),
                    React.createElement('p', {
                        key: 'loading-text',
                        className: "text-yellow-400 text-xl font-semibold"
                    }, "Analyzing Performance Data..."),
                    React.createElement('p', {
                        key: 'loading-subtext',
                        className: "text-white/60 text-sm mt-2"
                    }, "Processing 12,319 leads across quarters")
                ]));
            }

            const currentData = data[activeQuarter] || [];
            
            const getRankingsByCategory = () => {
                let filteredData = currentData;
                
                if (selectedCategory !== 'all') {
                    const categoryStatuses = industryCategories[selectedCategory]?.statuses || [];
                    filteredData = currentData.filter(agent => {
                        const categoryLeads = categoryStatuses.reduce((sum, status) => {
                            return sum + (agent.statusBreakdown[status] || 0);
                        }, 0);
                        return categoryLeads > 0;
                    });
                }
                
                return {
                    conversionMasters: [...filteredData].sort((a, b) => b.conversionRate - a.conversionRate).slice(0, 8),
                    engagementLeaders: [...filteredData].sort((a, b) => b.engagementRate - a.engagementRate).slice(0, 8),
                    leadGenerators: [...filteredData].sort((a, b) => b.total - a.total).slice(0, 8),
                    qualitySpecialists: [...filteredData].sort((a, b) => b.leadQualityScore - a.leadQualityScore).slice(0, 8),
                    closingChampions: [...filteredData].sort((a, b) => b.customers - a.customers).slice(0, 8),
                    followUpExperts: [...filteredData].sort((a, b) => b.followUpEfficiency - a.followUpEfficiency).slice(0, 8)
                };
            };

            const rankings = getRankingsByCategory();

            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-red-900 p-6"
            }, [
                // Header section
                React.createElement('div', {
                    key: 'header',
                    className: "mb-8"
                }, [
                    React.createElement('div', {
                        key: 'title-section',
                        className: "flex items-center gap-4 mb-6"
                    }, [
                        React.createElement('div', {
                            key: 'trophy-container',
                            className: "relative"
                        }, [
                            React.createElement(Trophy, {
                                key: 'trophy',
                                className: "text-yellow-400 w-10 h-10"
                            }),
                            React.createElement('div', {
                                key: 'pulse-dot',
                                className: "absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full animate-pulse"
                            })
                        ]),
                        React.createElement('div', { key: 'title-text' }, [
                            React.createElement('h1', {
                                key: 'main-title',
                                className: "text-4xl font-bold text-white"
                            }, "Real Estate Performance Analytics"),
                            React.createElement('p', {
                                key: 'subtitle',
                                className: "text-yellow-400/80 text-lg"
                            }, "Industry-Leading Rankings & Metrics Dashboard")
                        ])
                    ]),
                    
                    // Quarter selector and filters
                    React.createElement('div', {
                        key: 'controls',
                        className: "flex items-center justify-between mb-6"
                    }, [
                        React.createElement('div', {
                            key: 'quarter-controls',
                            className: "flex items-center gap-4"
                        }, [
                            React.createElement(Calendar, {
                                key: 'calendar-icon',
                                className: "text-yellow-400 w-6 h-6"
                            }),
                            React.createElement('div', {
                                key: 'quarter-buttons',
                                className: "flex bg-red-800/50 backdrop-blur-sm rounded-xl p-2 border border-red-700/50"
                            }, ['Q1', 'Q2', 'Q3'].map(quarter => 
                                React.createElement('button', {
                                    key: quarter,
                                    onClick: () => setActiveQuarter(quarter),
                                    className: `px-6 py-3 rounded-lg transition-all duration-300 font-semibold ${
                                        activeQuarter === quarter 
                                            ? 'bg-yellow-400 text-red-900 shadow-lg transform scale-105' 
                                            : 'text-white hover:bg-red-700/50 hover:text-yellow-400'
                                    }`
                                }, [
                                    `${quarter} 2025`,
                                    React.createElement('span', {
                                        key: 'lead-count',
                                        className: "block text-xs opacity-75"
                                    }, `${data.quarterCounts[quarter]} leads`)
                                ])
                            ))
                        ]),
                        
                        React.createElement('div', {
                            key: 'category-filter',
                            className: "flex items-center gap-3"
                        }, [
                            React.createElement(Filter, {
                                key: 'filter-icon',
                                className: "text-yellow-400 w-5 h-5"
                            }),
                            React.createElement('select', {
                                key: 'category-select',
                                value: selectedCategory,
                                onChange: (e) => setSelectedCategory(e.target.value),
                                className: "bg-red-800/50 border border-red-700/50 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 backdrop-blur-sm"
                            }, [
                                React.createElement('option', { key: 'all', value: 'all' }, 'ðŸ† All Categories'),
                                React.createElement('option', { key: 'lead-gen', value: 'Lead Generation' }, 'ðŸ‘¥ Lead Generation'),
                                React.createElement('option', { key: 'engagement', value: 'Engagement' }, 'ðŸ’¬ Engagement'),
                                React.createElement('option', { key: 'conversion', value: 'Conversion' }, 'âœ… Conversion'),
                                React.createElement('option', { key: 'non-viable', value: 'Non-Viable' }, 'âŒ Non-Viable')
                            ]),
                            React.createElement('div', {
                                key: 'filter-description',
                                className: "text-xs text-yellow-400/70"
                            }, selectedCategory === 'all' ? 'Showing all metrics' : 
                               selectedCategory === 'Lead Generation' ? 'NEW + ATTEMPT leads' :
                               selectedCategory === 'Engagement' ? 'CONTACTED + OPTIONS SENT' :
                               selectedCategory === 'Conversion' ? 'HOT + CUSTOMER' :
                               'UNSUCCESSFUL + Junk + IDLE')
                        ])
                    ]),

                    // Stats grid
                    React.createElement('div', {
                        key: 'stats-grid',
                        className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"
                    }, [
                        { label: 'Total Leads', value: currentData.reduce((sum, agent) => sum + agent.total, 0), icon: Users, color: 'blue' },
                        { label: 'Total Conversions', value: currentData.reduce((sum, agent) => sum + agent.customers, 0), icon: CheckCircle, color: 'green' },
                        { label: 'Active Agents', value: currentData.length, icon: Star, color: 'purple' },
                        { label: 'Avg Conversion Rate', value: `${(currentData.reduce((sum, agent) => sum + agent.conversionRate, 0) / currentData.length || 0).toFixed(1)}%`, icon: TrendingUp, color: 'yellow' }
                    ].map((stat, index) => 
                        React.createElement('div', {
                            key: index,
                            className: "bg-red-800/30 backdrop-blur-sm rounded-xl p-4 border border-red-700/30 hover:bg-red-800/50 transition-all"
                        }, React.createElement('div', {
                            className: "flex items-center gap-3"
                        }, [
                            React.createElement(stat.icon, {
                                key: 'icon',
                                className: "text-yellow-400 w-6 h-6"
                            }),
                            React.createElement('div', { key: 'stat-content' }, [
                                React.createElement('p', {
                                    key: 'label',
                                    className: "text-white/80 text-sm"
                                }, stat.label),
                                React.createElement('p', {
                                    key: 'value',
                                    className: "text-white text-xl font-bold"
                                }, stat.value)
                            ])
                        ]))
                    ))
                ]),

                // Main rankings section
                React.createElement('div', {
                    key: 'rankings-section',
                    className: "mb-8"
                }, [
                    React.createElement('div', {
                        key: 'section-header',
                        className: "mb-6"
                    }, React.createElement('div', {
                        className: "text-center"
                    }, [
                        React.createElement('h2', {
                            key: 'section-title',
                            className: "text-2xl font-bold text-white mb-2"
                        }, selectedCategory === 'all' ? 'Complete Performance Overview' :
                           selectedCategory === 'Lead Generation' ? 'ðŸ‘¥ Lead Generation Specialists' :
                           selectedCategory === 'Engagement' ? 'ðŸ’¬ Client Engagement Experts' :
                           selectedCategory === 'Conversion' ? 'âœ… Conversion Champions' :
                           'âŒ Lead Qualification Masters'),
                        React.createElement('p', {
                            key: 'section-description',
                            className: "text-yellow-400/80"
                        }, selectedCategory === 'all' ? 'Comprehensive rankings across all performance metrics' :
                           selectedCategory === 'Lead Generation' ? 'Agents excelling at new lead acquisition and first contact' :
                           selectedCategory === 'Engagement' ? 'Top performers in client communication and follow-up' :
                           selectedCategory === 'Conversion' ? 'Leaders in converting prospects to customers' :
                           'Specialists in lead qualification and pipeline management')
                    ])),
                    
                    // Rankings cards grid
                    React.createElement('div', {
                        key: 'rankings-grid',
                        className: "grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"
                    }, [
                        // Conversion Masters card
                        React.createElement('div', {
                            key: 'conversion-masters',
                            className: "bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center gap-3 mb-6"
                            }, [
                                React.createElement('div', {
                                    key: 'icon-container',
                                    className: "p-2 bg-yellow-400/20 rounded-lg"
                                }, React.createElement(Target, {
                                    className: "text-yellow-400 w-6 h-6"
                                })),
                                React.createElement('div', { key: 'title' }, [
                                    React.createElement('h3', {
                                        key: 'title-text',
                                        className: "text-xl font-semibold text-white"
                                    }, "Conversion Masters"),
                                    React.createElement('p', {
                                        key: 'subtitle-text',
                                        className: "text-yellow-400/70 text-sm"
                                    }, "Lead-to-Customer Excellence")
                                ])
                            ]),
                            React.createElement('div', {
                                key: 'rankings-list',
                                className: "space-y-3"
                            }, rankings.conversionMasters.slice(0, 5).map((agent, index) => 
                                React.createElement('div', {
                                    key: agent.agent,
                                    className: "flex items-center gap-3 p-3 bg-red-700/30 rounded-lg hover:bg-red-700/50 transition-all"
                                }, [
                                    React.createElement('div', {
                                        key: 'rank',
                                        className: `w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${
                                            index === 0 ? 'bg-yellow-400 text-red-900' : 
                                            index === 1 ? 'bg-gray-300 text-red-900' : 
                                            index === 2 ? 'bg-yellow-600 text-white' : 
                                            'bg-red-600 text-white'
                                        }`
                                    }, index + 1),
                                    React.createElement('div', {
                                        key: 'agent-info',
                                        className: "flex-1"
                                    }, [
                                        React.createElement('p', {
                                            key: 'name',
                                            className: "text-white font-medium text-sm"
                                        }, agent.agent),
                                        React.createElement('p', {
                                            key: 'stats',
                                            className: "text-yellow-400 text-xs"
                                        }, `${agent.customers}/${agent.total} leads`)
                                    ]),
                                    React.createElement('div', {
                                        key: 'metrics',
                                        className: "text-right"
                                    }, [
                                        React.createElement('p', {
                                            key: 'rate',
                                            className: "text-white font-bold"
                                        }, `${agent.conversionRate}%`),
                                        React.createElement('div', {
                                            key: 'progress-bar',
                                            className: "w-16 bg-red-900 rounded-full h-2"
                                        }, React.createElement('div', {
                                            className: "bg-gradient-to-r from-yellow-400 to-yellow-500 h-2 rounded-full transition-all duration-500",
                                            style: { width: `${Math.min(agent.conversionRate * 2, 100)}%` }
                                        }))
                                    ])
                                ])
                            ))
                        ]),

                        // Add other ranking cards here with similar structure...
                        // For brevity, I'll include just the structure for the remaining cards
                        
                        // Lead Volume Champions
                        React.createElement('div', {
                            key: 'lead-generators',
                            className: "bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center gap-3 mb-6"
                            }, [
                                React.createElement('div', {
                                    key: 'icon-container',
                                    className: "p-2 bg-blue-400/20 rounded-lg"
                                }, React.createElement(Users, {
                                    className: "text-blue-400 w-6 h-6"
                                })),
                                React.createElement('div', { key: 'title' }, [
                                    React.createElement('h3', {
                                        key: 'title-text',
                                        className: "text-xl font-semibold text-white"
                                    }, "Lead Volume Champions"),
                                    React.createElement('p', {
                                        key: 'subtitle-text',
                                        className: "text-blue-400/70 text-sm"
                                    }, "Highest Lead Handlers")
                                ])
                            ]),
                            React.createElement('div', {
                                key: 'rankings-list',
                                className: "space-y-3"
                            }, rankings.leadGenerators.slice(0, 5).map((agent, index) => 
                                React.createElement('div', {
                                    key: agent.agent,
                                    className: "flex items-center justify-between p-3 bg-red-700/30 rounded-lg hover:bg-red-700/50 transition-all"
                                }, [
                                    React.createElement('div', {
                                        key: 'left-content',
                                        className: "flex items-center gap-3"
                                    }, [
                                        React.createElement('div', {
                                            key: 'rank',
                                            className: `w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${
                                                index < 3 ? 'bg-blue-400 text-red-900' : 'bg-red-600 text-white'
                                            }`
                                        }, index + 1),
                                        React.createElement('div', { key: 'agent-info' }, [
                                            React.createElement('p', {
                                                key: 'name',
                                                className: "text-white font-medium text-sm"
                                            }, agent.agent),
                                            React.createElement('p', {
                                                key: 'sources',
                                                className: "text-blue-400 text-xs"
                                            }, `${agent.sourceDiversity} sources`)
                                        ])
                                    ]),
                                    React.createElement('div', {
                                        key: 'right-content',
                                        className: "text-right"
                                    }, [
                                        React.createElement('p', {
                                            key: 'total',
                                            className: "text-white font-bold text-lg"
                                        }, agent.total),
                                        React.createElement('p', {
                                            key: 'label',
                                            className: "text-blue-400 text-xs"
                                        }, "leads")
                                    ])
                                ])
                            ))
                        ])
                    ])
                ]),

                // Quarter comparison section
                React.createElement('div', {
                    key: 'quarter-comparison',
                    className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"
                }, ['Q1', 'Q2', 'Q3'].map(quarter => {
                    const quarterData = data[quarter] || [];
                    const totalLeads = quarterData.reduce((sum, agent) => sum + agent.total, 0);
                    const totalConversions = quarterData.reduce((sum, agent) => sum + agent.customers, 0);
                    const avgConversion = quarterData.length > 0 ? 
                        (quarterData.reduce((sum, agent) => sum + agent.conversionRate, 0) / quarterData.length).toFixed(1) : 0;
                    
                    return React.createElement('div', {
                        key: quarter,
                        className: `p-4 rounded-lg border-2 transition-all ${
                            activeQuarter === quarter 
                                ? 'bg-yellow-400/20 border-yellow-400' 
                                : 'bg-red-700/20 border-red-700/50 hover:border-red-600'
                        }`
                    }, React.createElement('div', {
                        className: "text-center"
                    }, [
                        React.createElement('h4', {
                            key: 'quarter-title',
                            className: `text-lg font-bold mb-2 ${
                                activeQuarter === quarter ? 'text-yellow-400' : 'text-white'
                            }`
                        }, `${quarter} 2025`),
                        React.createElement('div', {
                            key: 'quarter-stats',
                            className: "space-y-2"
                        }, [
                            React.createElement('div', { key: 'leads' }, [
                                React.createElement('p', {
                                    key: 'leads-value',
                                    className: "text-2xl font-bold text-white"
                                }, totalLeads),
                                React.createElement('p', {
                                    key: 'leads-label',
                                    className: "text-xs text-white/60"
                                }, "Total Leads")
                            ]),
                            React.createElement('div', { key: 'conversions' }, [
                                React.createElement('p', {
                                    key: 'conversions-value',
                                    className: "text-xl font-bold text-green-400"
                                }, totalConversions),
                                React.createElement('p', {
                                    key: 'conversions-label',
                                    className: "text-xs text-white/60"
                                }, "Conversions")
                            ]),
                            React.createElement('div', { key: 'avg-conversion' }, [
                                React.createElement('p', {
                                    key: 'avg-value',
                                    className: "text-lg font-bold text-yellow-400"
                                }, `${avgConversion}%`),
                                React.createElement('p', {
                                    key: 'avg-label',
                                    className: "text-xs text-white/60"
                                }, "Avg Conversion")
                            ])
                        ])
                    ]));
                })),

                // Footer
                React.createElement('div', {
                    key: 'footer',
                    className: "mt-8 text-center"
                }, React.createElement('p', {
                    className: "text-white/60 text-sm"
                }, `Last updated: ${new Date().toLocaleDateString()} â€¢ Real Estate Performance Analytics â€¢ Showing ${activeQuarter} 2025 data with ${currentData.length} active agents`))
            ]);
        };

        // Render the dashboard
        ReactDOM.render(React.createElement(Dashboard), document.getElementById('root'));
    </script>
</body>
</html>
