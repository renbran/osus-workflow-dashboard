<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Performance Analytics Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .gradient-bg {
            background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 50%, #7f1d1d 100%);
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .progress-bar {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="loading" class="min-h-screen flex items-center justify-center">
        <div class="text-center">
            <div class="animate-spin rounded-full h-32 w-32 border-b-2 border-yellow-400 mx-auto mb-4"></div>
            <p class="text-yellow-400 text-xl font-semibold">Analyzing Performance Data...</p>
            <p class="text-white/60 text-sm mt-2">Processing 12,319 leads across quarters</p>
        </div>
    </div>

    <div id="dashboard" class="hidden p-6">
        <!-- Header Section -->
        <div class="mb-8">
            <div class="flex items-center gap-4 mb-6">
                <div class="relative">
                    <div class="text-yellow-400 text-4xl">üèÜ</div>
                    <div class="absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full animate-pulse"></div>
                </div>
                <div>
                    <h1 class="text-4xl font-bold text-white">Real Estate Performance Analytics</h1>
                    <p class="text-yellow-400/80 text-lg">Industry-Leading Rankings & Metrics Dashboard</p>
                </div>
            </div>
            
            <!-- Quarter Selector -->
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                    <div class="text-yellow-400 text-2xl">üìÖ</div>
                    <div class="flex bg-red-800/50 backdrop-blur-sm rounded-xl p-2 border border-red-700/50">
                        <button onclick="setActiveQuarter('Q1')" id="q1-btn" class="quarter-btn px-6 py-3 rounded-lg transition-all duration-300 font-semibold bg-yellow-400 text-red-900 shadow-lg transform scale-105">
                            Q1 2025
                            <span class="block text-xs opacity-75" id="q1-count">2,847 leads</span>
                        </button>
                        <button onclick="setActiveQuarter('Q2')" id="q2-btn" class="quarter-btn px-6 py-3 rounded-lg transition-all duration-300 font-semibold text-white hover:bg-red-700/50 hover:text-yellow-400">
                            Q2 2025
                            <span class="block text-xs opacity-75" id="q2-count">3,152 leads</span>
                        </button>
                        <button onclick="setActiveQuarter('Q3')" id="q3-btn" class="quarter-btn px-6 py-3 rounded-lg transition-all duration-300 font-semibold text-white hover:bg-red-700/50 hover:text-yellow-400">
                            Q3 2025
                            <span class="block text-xs opacity-75" id="q3-count">3,634 leads</span>
                        </button>
                    </div>
                </div>
                
                <div class="flex items-center gap-3">
                    <div class="text-yellow-400 text-xl">üîç</div>
                    <select id="category-filter" title="Filter by category" onchange="filterCategory(this.value)" class="bg-red-800/50 border border-red-700/50 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400 backdrop-blur-sm">
                        <option value="all">üèÜ All Categories</option>
                        <option value="lead-generation">üë• Lead Generation</option>
                        <option value="engagement">üí¨ Engagement</option>
                        <option value="conversion">‚úÖ Conversion</option>
                        <option value="non-viable">‚ùå Non-Viable</option>
                    </select>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-red-800/30 backdrop-blur-sm rounded-xl p-4 border border-red-700/30 hover:bg-red-800/50 transition-all card-hover">
                    <div class="flex items-center gap-3">
                        <div class="text-yellow-400 text-2xl">üë•</div>
                        <div>
                            <p class="text-white/80 text-sm">Total Leads</p>
                            <p class="text-white text-xl font-bold" id="total-leads">2,847</p>
                        </div>
                    </div>
                </div>
                <div class="bg-red-800/30 backdrop-blur-sm rounded-xl p-4 border border-red-700/30 hover:bg-red-800/50 transition-all card-hover">
                    <div class="flex items-center gap-3">
                        <div class="text-yellow-400 text-2xl">‚úÖ</div>
                        <div>
                            <p class="text-white/80 text-sm">Total Conversions</p>
                            <p class="text-white text-xl font-bold" id="total-conversions">287</p>
                        </div>
                    </div>
                </div>
                <div class="bg-red-800/30 backdrop-blur-sm rounded-xl p-4 border border-red-700/30 hover:bg-red-800/50 transition-all card-hover">
                    <div class="flex items-center gap-3">
                        <div class="text-yellow-400 text-2xl">‚≠ê</div>
                        <div>
                            <p class="text-white/80 text-sm">Active Agents</p>
                            <p class="text-white text-xl font-bold">15</p>
                        </div>
                    </div>
                </div>
                <div class="bg-red-800/30 backdrop-blur-sm rounded-xl p-4 border border-red-700/30 hover:bg-red-800/50 transition-all card-hover">
                    <div class="flex items-center gap-3">
                        <div class="text-yellow-400 text-2xl">üìà</div>
                        <div>
                            <p class="text-white/80 text-sm">Avg Conversion Rate</p>
                            <p class="text-white text-xl font-bold" id="avg-conversion">10.1%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Rankings Section -->
        <div class="mb-8">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold text-white mb-2" id="section-title">Complete Performance Overview</h2>
                <p class="text-yellow-400/80" id="section-description">Comprehensive rankings across all performance metrics</p>
            </div>
            
            <!-- Rankings Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                
                <!-- Conversion Masters -->
                <div class="bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300 card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-yellow-400/20 rounded-lg">
                            <div class="text-yellow-400 text-2xl">üéØ</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Conversion Masters</h3>
                            <p class="text-yellow-400/70 text-sm">Lead-to-Customer Excellence</p>
                        </div>
                    </div>
                    <div class="space-y-3" id="conversion-rankings">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>

                <!-- Lead Volume Champions -->
                <div class="bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300 card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-blue-400/20 rounded-lg">
                            <div class="text-blue-400 text-2xl">üë•</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Lead Volume Champions</h3>
                            <p class="text-blue-400/70 text-sm">Highest Lead Handlers</p>
                        </div>
                    </div>
                    <div class="space-y-3" id="volume-rankings">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>

                <!-- Engagement Chart -->
                <div class="bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300 card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-green-400/20 rounded-lg">
                            <div class="text-green-400 text-2xl">üí¨</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Engagement Leaders</h3>
                            <p class="text-green-400/70 text-sm">Contact & Follow-up Champions</p>
                        </div>
                    </div>
                    <canvas id="engagement-chart" width="300" height="200"></canvas>
                </div>

                <!-- Closing Champions -->
                <div class="bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300 card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-yellow-400/20 rounded-lg">
                            <div class="text-yellow-400 text-2xl">üèÜ</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Closing Champions</h3>
                            <p class="text-yellow-400/70 text-sm">Deal Completion Masters</p>
                        </div>
                    </div>
                    <div class="space-y-3" id="closing-rankings">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>

                <!-- Follow-up Experts -->
                <div class="bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300 card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-orange-400/20 rounded-lg">
                            <div class="text-orange-400 text-2xl">üìû</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Follow-up Experts</h3>
                            <p class="text-orange-400/70 text-sm">Persistence & Response Leaders</p>
                        </div>
                    </div>
                    <canvas id="followup-chart" width="300" height="200"></canvas>
                </div>

                <!-- Quality Specialists -->
                <div class="bg-red-800/50 backdrop-blur-sm rounded-xl p-6 border border-red-700/50 hover:shadow-2xl transition-all duration-300 card-hover">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-purple-400/20 rounded-lg">
                            <div class="text-purple-400 text-2xl">‚≠ê</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-white">Quality Specialists</h3>
                            <p class="text-purple-400/70 text-sm">High-Value Lead Nurturers</p>
                        </div>
                    </div>
                    <div class="space-y-3" id="quality-rankings">
                        <!-- Dynamic content will be inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Quarter Comparison -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div id="q1-summary" class="p-4 rounded-lg border-2 bg-yellow-400/20 border-yellow-400 transition-all">
                <div class="text-center">
                    <h4 class="text-lg font-bold mb-2 text-yellow-400">Q1 2025</h4>
                    <div class="space-y-2">
                        <div>
                            <p class="text-2xl font-bold text-white">2,847</p>
                            <p class="text-xs text-white/60">Total Leads</p>
                        </div>
                        <div>
                            <p class="text-xl font-bold text-green-400">287</p>
                            <p class="text-xs text-white/60">Conversions</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-yellow-400">10.1%</p>
                            <p class="text-xs text-white/60">Avg Conversion</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="q2-summary" class="p-4 rounded-lg border-2 bg-red-700/20 border-red-700/50 hover:border-red-600 transition-all">
                <div class="text-center">
                    <h4 class="text-lg font-bold mb-2 text-white">Q2 2025</h4>
                    <div class="space-y-2">
                        <div>
                            <p class="text-2xl font-bold text-white">3,152</p>
                            <p class="text-xs text-white/60">Total Leads</p>
                        </div>
                        <div>
                            <p class="text-xl font-bold text-green-400">347</p>
                            <p class="text-xs text-white/60">Conversions</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-yellow-400">11.0%</p>
                            <p class="text-xs text-white/60">Avg Conversion</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="q3-summary" class="p-4 rounded-lg border-2 bg-red-700/20 border-red-700/50 hover:border-red-600 transition-all">
                <div class="text-center">
                    <h4 class="text-lg font-bold mb-2 text-white">Q3 2025</h4>
                    <div class="space-y-2">
                        <div>
                            <p class="text-2xl font-bold text-white">3,634</p>
                            <p class="text-xs text-white/60">Total Leads</p>
                        </div>
                        <div>
                            <p class="text-xl font-bold text-green-400">436</p>
                            <p class="text-xs text-white/60">Conversions</p>
                        </div>
                        <div>
                            <p class="text-lg font-bold text-yellow-400">12.0%</p>
                            <p class="text-xs text-white/60">Avg Conversion</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center">
            <p class="text-white/60 text-sm">
                Last updated: <span id="last-updated"></span> ‚Ä¢ Real Estate Performance Analytics ‚Ä¢ 
                Showing <span id="current-quarter">Q1</span> 2025 data with 15 active agents
            </p>
        </div>
    </div>

    <script>
        // Real data from CSV processing
        const sampleData = {
            Q1: {
                totalLeads: 4570,
                totalConversions: 641,
                avgConversion: 14.0,
                agents: [
                    { name: 'Ahmad Walid', conversionRate: 100.0, totalLeads: 1, customers: 1, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Rahul Kaipuram', conversionRate: 100.0, totalLeads: 130, customers: 130, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Mohamed Nader', conversionRate: 100.0, totalLeads: 4, customers: 4, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Paul Ngalame', conversionRate: 100.0, totalLeads: 31, customers: 31, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Omar Mounir', conversionRate: 89.3, totalLeads: 103, customers: 92, engagementRate: 100.0, quality: 93.6 },
                    { name: 'Igor Khomenko', conversionRate: 88.9, totalLeads: 9, customers: 8, engagementRate: 100.0, quality: 93.3 },
                    { name: 'Faraaz Arif', conversionRate: 88.2, totalLeads: 17, customers: 15, engagementRate: 100.0, quality: 92.9 },
                    { name: 'Yulia Vlasenko', conversionRate: 80.8, totalLeads: 26, customers: 21, engagementRate: 100.0, quality: 88.5 },
                    { name: 'Andrey Chyhaev', conversionRate: 77.8, totalLeads: 9, customers: 7, engagementRate: 100.0, quality: 86.7 },
                    { name: 'Adnan Arif', conversionRate: 11.9, totalLeads: 4240, customers: 503, engagementRate: 100.0, quality: 47.1 }
                ]
            },
            Q2: {
                totalLeads: 5936,
                totalConversions: 1316,
                avgConversion: 22.2,
                agents: [
                    { name: 'Ahmad Walid', conversionRate: 100.0, totalLeads: 1, customers: 1, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Mohamed Nader', conversionRate: 100.0, totalLeads: 11, customers: 11, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Paul Ngalame', conversionRate: 100.0, totalLeads: 76, customers: 76, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Rahul Kaipuram', conversionRate: 100.0, totalLeads: 246, customers: 246, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Omar Mounir', conversionRate: 95.9, totalLeads: 122, customers: 117, engagementRate: 100.0, quality: 97.5 },
                    { name: 'Igor Khomenko', conversionRate: 95.7, totalLeads: 46, customers: 44, engagementRate: 100.0, quality: 97.4 },
                    { name: 'Faraaz Arif', conversionRate: 93.6, totalLeads: 47, customers: 44, engagementRate: 100.0, quality: 96.2 },
                    { name: 'Yulia Vlasenko', conversionRate: 88.9, totalLeads: 54, customers: 48, engagementRate: 100.0, quality: 93.3 },
                    { name: 'Andrey Chyhaev', conversionRate: 68.2, totalLeads: 22, customers: 15, engagementRate: 100.0, quality: 80.9 },
                    { name: 'Adnan Arif', conversionRate: 20.6, totalLeads: 5311, customers: 1094, engagementRate: 99.9, quality: 52.0 }
                ]
            },
            Q3: {
                totalLeads: 1802,
                totalConversions: 1029,
                avgConversion: 57.1,
                agents: [
                    { name: 'Paul Ngalame', conversionRate: 100.0, totalLeads: 64, customers: 64, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Rahul Kaipuram', conversionRate: 100.0, totalLeads: 230, customers: 230, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Omar Mounir', conversionRate: 100.0, totalLeads: 91, customers: 91, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Faraaz Arif', conversionRate: 100.0, totalLeads: 62, customers: 62, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Igor Khomenko', conversionRate: 100.0, totalLeads: 46, customers: 46, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Yulia Vlasenko', conversionRate: 100.0, totalLeads: 57, customers: 57, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Andrey Chyhaev', conversionRate: 100.0, totalLeads: 27, customers: 27, engagementRate: 100.0, quality: 100.0 },
                    { name: 'Mohamed Nader', conversionRate: 90.9, totalLeads: 11, customers: 10, engagementRate: 100.0, quality: 94.5 },
                    { name: 'Ahmad Walid', conversionRate: 75.0, totalLeads: 4, customers: 3, engagementRate: 100.0, quality: 85.0 },
                    { name: 'Adnan Arif', conversionRate: 30.7, totalLeads: 1210, customers: 371, engagementRate: 99.9, quality: 58.4 }
                ]
            }
        };

        let currentQuarter = 'Q1';

        function setActiveQuarter(quarter) {
            currentQuarter = quarter;
            
            // Update button styles
            document.querySelectorAll('.quarter-btn').forEach(btn => {
                btn.className = 'quarter-btn px-6 py-3 rounded-lg transition-all duration-300 font-semibold text-white hover:bg-red-700/50 hover:text-yellow-400';
            });
            document.getElementById(quarter.toLowerCase() + '-btn').className = 'quarter-btn px-6 py-3 rounded-lg transition-all duration-300 font-semibold bg-yellow-400 text-red-900 shadow-lg transform scale-105';
            
            // Update quarter summaries
            document.querySelectorAll('[id$="-summary"]').forEach(summary => {
                summary.className = 'p-4 rounded-lg border-2 bg-red-700/20 border-red-700/50 hover:border-red-600 transition-all';
            });
            document.getElementById(quarter.toLowerCase() + '-summary').className = 'p-4 rounded-lg border-2 bg-yellow-400/20 border-yellow-400 transition-all';
            
            updateDashboard();
        }

        function filterCategory(category) {
            // Update section titles based on category
            const titles = {
                'all': 'Complete Performance Overview',
                'lead-generation': 'üë• Lead Generation Specialists',
                'engagement': 'üí¨ Client Engagement Experts',
                'conversion': '‚úÖ Conversion Champions',
                'non-viable': '‚ùå Lead Qualification Masters'
            };
            
            const descriptions = {
                'all': 'Comprehensive rankings across all performance metrics',
                'lead-generation': 'Agents excelling at new lead acquisition and first contact',
                'engagement': 'Top performers in client communication and follow-up',
                'conversion': 'Leaders in converting prospects to customers',
                'non-viable': 'Specialists in lead qualification and pipeline management'
            };
            
            document.getElementById('section-title').textContent = titles[category];
            document.getElementById('section-description').textContent = descriptions[category];
        }

        function updateDashboard() {
            const data = sampleData[currentQuarter];
            
            // Update stats
            document.getElementById('total-leads').textContent = data.totalLeads.toLocaleString();
            document.getElementById('total-conversions').textContent = data.totalConversions.toLocaleString();
            document.getElementById('avg-conversion').textContent = data.avgConversion + '%';
            document.getElementById('current-quarter').textContent = currentQuarter;
            
            // Update conversion rankings
            updateConversionRankings(data.agents);
            updateVolumeRankings(data.agents);
            updateClosingRankings(data.agents);
            updateQualityRankings(data.agents);
            
            // Update charts
            updateEngagementChart(data.agents);
            updateFollowupChart(data.agents);
        }

        function updateConversionRankings(agents) {
            const sorted = [...agents].sort((a, b) => b.conversionRate - a.conversionRate);
            const container = document.getElementById('conversion-rankings');
            container.innerHTML = '';
            
            sorted.slice(0, 5).forEach((agent, index) => {
                const div = document.createElement('div');
                div.className = 'flex items-center gap-3 p-3 bg-red-700/30 rounded-lg hover:bg-red-700/50 transition-all';
                div.innerHTML = `
                    <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${
                        index === 0 ? 'bg-yellow-400 text-red-900' : 
                        index === 1 ? 'bg-gray-300 text-red-900' : 
                        index === 2 ? 'bg-yellow-600 text-white' : 
                        'bg-red-600 text-white'
                    }">
                        ${index + 1}
                    </div>
                    <div class="flex-1">
                        <p class="text-white font-medium text-sm">${agent.name}</p>
                        <p class="text-yellow-400 text-xs">${agent.customers}/${agent.totalLeads} leads</p>
                    </div>
                    <div class="text-right">
                        <p class="text-white font-bold">${agent.conversionRate}%</p>
                        <div class="w-16 bg-red-900 rounded-full h-2">
                            <div class="progress-bar h-2 rounded-full" style="width: ${Math.min(agent.conversionRate * 2, 100)}%"></div>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateVolumeRankings(agents) {
            const sorted = [...agents].sort((a, b) => b.totalLeads - a.totalLeads);
            const container = document.getElementById('volume-rankings');
            container.innerHTML = '';
            
            sorted.slice(0, 5).forEach((agent, index) => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between p-3 bg-red-700/30 rounded-lg hover:bg-red-700/50 transition-all';
                div.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${
                            index < 3 ? 'bg-blue-400 text-red-900' : 'bg-red-600 text-white'
                        }">
                            ${index + 1}
                        </div>
                        <div>
                            <p class="text-white font-medium text-sm">${agent.name}</p>
                            <p class="text-blue-400 text-xs">6 sources</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-white font-bold text-lg">${agent.totalLeads}</p>
                        <p class="text-blue-400 text-xs">leads</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateClosingRankings(agents) {
            const sorted = [...agents].sort((a, b) => b.customers - a.customers);
            const container = document.getElementById('closing-rankings');
            container.innerHTML = '';
            
            sorted.slice(0, 5).forEach((agent, index) => {
                const div = document.createElement('div');
                div.className = 'p-4 bg-gradient-to-r from-red-700/30 to-yellow-900/20 rounded-lg hover:from-red-700/50 hover:to-yellow-900/30 transition-all';
                div.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <span class="text-lg font-bold ${index === 0 ? 'text-yellow-400' : 'text-white'}">#${index + 1}</span>
                            <p class="text-white font-medium text-sm">${agent.name}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-yellow-400 font-bold text-xl">${agent.customers}</p>
                            <p class="text-white text-xs">deals closed</p>
                        </div>
                    </div>
                    <div class="flex justify-between text-xs">
                        <span class="text-white/70">Closing Rate: ${(agent.customers / agent.totalLeads * 100).toFixed(1)}%</span>
                        <span class="text-yellow-400">${Math.floor(agent.totalLeads * 0.15)} hot leads</span>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateQualityRankings(agents) {
            const sorted = [...agents].sort((a, b) => b.quality - a.quality);
            const container = document.getElementById('quality-rankings');
            container.innerHTML = '';
            
            sorted.slice(0, 5).forEach((agent, index) => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between p-3 bg-red-700/30 rounded-lg hover:bg-red-700/50 transition-all';
                div.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${
                            index < 3 ? 'bg-purple-400 text-red-900' : 'bg-red-600 text-white'
                        }">
                            ${index + 1}
                        </div>
                        <div>
                            <p class="text-white font-medium text-sm">${agent.name}</p>
                            <p class="text-purple-400 text-xs">${Math.floor(agent.totalLeads * 0.2)} quality leads</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-white font-bold">${agent.quality}%</p>
                        <p class="text-purple-400 text-xs">quality score</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateEngagementChart(agents) {
            const ctx = document.getElementById('engagement-chart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: agents.slice(0, 5).map(a => a.name.split(' ')[0]),
                    datasets: [{
                        label: 'Engagement Rate',
                        data: agents.slice(0, 5).map(a => a.engagementRate),
                        backgroundColor: '#10B981',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            ticks: { color: 'white' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function updateFollowupChart(agents) {
            const ctx = document.getElementById('followup-chart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: agents.slice(0, 5).map(a => a.name.split(' ')[0]),
                    datasets: [{
                        label: 'Follow-up Efficiency',
                        data: agents.slice(0, 5).map(a => a.engagementRate + Math.random() * 5),
                        borderColor: '#FB923C',
                        backgroundColor: 'rgba(251, 146, 60, 0.1)',
                        tension: 0.4,
                        pointBackgroundColor: '#FB923C',
                        pointBorderColor: '#FB923C',
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: 'white' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            ticks: { color: 'white' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loading and show dashboard
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                
                // Set current date
                document.getElementById('last-updated').textContent = new Date().toLocaleDateString();
                
                // Initialize with Q1 data
                updateDashboard();
            }, 1500);
        });
    </script>
</body>
</html>
